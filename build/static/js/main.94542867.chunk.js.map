{"version":3,"sources":["services/persons.js","index.js"],"names":["baseUrl","services_persons","axios","get","then","response","data","newObject","post","id","put","concat","delete","Person","_ref","person","handleUpdate","react_default","a","createElement","name","toString","number","onClick","event","preventDefault","window","confirm","personService","Persons","_ref2","persons","search","personsToShow","filter","toLowerCase","includes","map","src_Person","key","Filter","_ref3","setSearch","value","onChange","target","PersonForm","_ref4","newName","newNumber","handleNameChange","handleNumberChange","addPerson","onSubmit","type","Notification","_ref5","message","className","Error","_ref6","App","useEffect","initialPersons","setPersons","_useState","useState","_useState2","Object","slicedToArray","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","_useState9","_useState10","setMessage","_useState11","_useState12","error","setError","setTimeout","src_Notification","src_Error","src_Filter","src_PersonForm","personObject","date","Date","toISOString","filtPersons","length","catch","returnedPerson","src_Persons","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.94542867.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, remove }","import ReactDOM from 'react-dom';\nimport React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\nimport './index.css'\n\nconst Person = ({person, handleUpdate}) => {\n  const removePerson = (event) => {\n    event.preventDefault()\n    if (window.confirm(`Delete ${person.name} ?`)) { \n      personService\n      .remove(person.id)\n      .then( () => {\n        handleUpdate(`Removed ${person.name}`)\n      })\n    }\n  }\n\n    return (\n      <p>\n        {person.name.toString()} {person.number.toString()} <button onClick={removePerson} >delete</button>\n      </p>\n    )\n}\n\nconst Persons = ({persons, search, handleUpdate}) => {\n\n  const personsToShow = (search === '')\n  ? persons\n  : persons.filter(person => person.name.toLowerCase().includes(search.toLowerCase()))\n\n  const rows = () => personsToShow.map(person =>\n      <Person\n          key={person.name}\n          person={person}\n          handleUpdate={handleUpdate}\n      />\n  )\n\n  return (\n    <div>\n      {rows()}\n    </div>\n  )\n}\n\nconst Filter = ({search, setSearch}) => {\n    const handleSearchChange = (event) => {\n      setSearch(event.target.value)\n    }\n\n    return (\n      <form>\n          filter shown with:    <input\n                                    value={search}\n                                    onChange={handleSearchChange}    \n                                />\n      </form>\n    )\n}\n\nconst PersonForm = ({newName, newNumber, handleNameChange, handleNumberChange, addPerson}) => {\n\n    return (\n      <form onSubmit={addPerson}>\n      <div>\n        name: <input\n                  value={newName}\n                  onChange={handleNameChange}    \n              />\n      </div>\n      <div>\n          number: <input \n                      value={newNumber}\n                      onChange={handleNumberChange}\n                  />\n      </div>\n        <button type=\"submit\">add</button>\n    </form>\n    )\n}\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"message\">\n      {message}\n    </div>\n  )\n}\n\nconst Error = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  const [ persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ search, setSearch ] = useState('')\n  const [ message, setMessage] = useState(null)\n  const [ error, setError] = useState(null)\n\n  const handleNameChange = (event) => {\n      setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n      setNewNumber(event.target.value)\n  }\n\n  const handleUpdate = (message) => {\n    personService\n    .getAll()\n    .then(initialPersons => {\n      setPersons(initialPersons)\n      setMessage(message)\n      setTimeout(() => {\n        setMessage(null)\n      }, 5000)\n    })\n  }\n\n  const addPerson = (event) => {\n      event.preventDefault()\n      const personObject = {\n        name: newName,\n        number: newNumber,\n        date: new Date().toISOString()\n      }\n      const filtPersons = persons.filter(person => person.name === newName)\n      if (filtPersons.length > 0){\n          if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n              personService\n              .update(filtPersons[0].id, personObject)\n              .then( () => {\n                handleUpdate(`Updated ${personObject.name}`)\n              })\n              .catch(error => {\n                setError(`Information of ${newName} has already been removed from server`)\n                setTimeout(() => {\n                  setError(null)\n                }, 5000)\n              })\n          }\n      }\n      else {\n        personService\n        .create(personObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setMessage(\n            `Added ${returnedPerson.name}`\n          )\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n        })\n        .catch(error => {\n          setError(`${error.response.data.error}`)\n          setTimeout(() => {\n            setError(null)\n          }, 5000)\n        })\n      }\n      setNewName('')\n      setNewNumber('')\n  }\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={message} />\n      <Error message={error} />\n      <Filter\n          search={search}\n          setSearch={setSearch}\n      />\n      <h2>add a new</h2>\n      <PersonForm\n          persons={persons}\n          newName={newName}\n          newNumber={newNumber}\n          handleNameChange={handleNameChange}\n          handleNumberChange={handleNumberChange}\n          addPerson={addPerson}\n      />\n      <h2>Numbers</h2>\n        <Persons \n          persons={persons}\n          search={search}\n          handleUpdate={handleUpdate}\n        />\n    </div>\n  )\n\n}\n\nexport default App\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}